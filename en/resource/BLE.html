
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Single BLE Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="BLE.html" />
    
    
    <link rel="prev" href="DataChannel.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Overview.html">
            
                <a href="Overview.html">
            
                    
                    Function Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Preparation.html">
            
                <a href="Preparation.html">
            
                    
                    Preparation work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="iOSAdaptation.html">
            
                <a href="iOSAdaptation.html">
            
                    
                    iOS Adaptation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Integrated.html">
            
                <a href="Integrated.html">
            
                    
                    Initiate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="User.html">
            
                <a href="User.html#user-management">
            
                    
                    User management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="User.html">
            
                <a href="User.html#use-mobile-phone-for-login">
            
                    
                    Use Mobile Phone for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="User.html">
            
                <a href="User.html#use-email-for-login">
            
                    
                    Use Email for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="User.html">
            
                <a href="User.html#use-uid-for-login">
            
                    
                    Use uid for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="User.html">
            
                <a href="User.html#third-party-login">
            
                    
                    Third Party Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="User.html">
            
                <a href="User.html#login-by-auth2">
            
                    
                    Login by Auth2(Login with Apple)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="User.html">
            
                <a href="User.html#modify-user-avatar">
            
                    
                    Modify User Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="User.html">
            
                <a href="User.html#logout">
            
                    
                    Logout, Disable Account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="User.html">
            
                <a href="User.html#handling-of-expired-session">
            
                    
                    Handling of Expired Session
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Home management
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Home.html">
            
                <a href="Home.html#home-management">
            
                    
                    Home Management Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="Home.html">
            
                <a href="Home.html#home-information-management">
            
                    
                    Operation Class of Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="Home.html">
            
                <a href="Home.html#home-member-management">
            
                    
                    Home Member Management Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="Home.html">
            
                <a href="Home.html#room-information-management">
            
                    
                    Room Management Class
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Activator.html">
            
                <a href="Activator.html#network-configuration">
            
                    
                    Network Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Activator.html">
            
                <a href="Activator.html#ez-mode">
            
                    
                    EZ mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="Activator.html">
            
                <a href="Activator.html#ap-mode">
            
                    
                    AP mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="Activator.html">
            
                <a href="Activator.html#wired-network-configuration-of-zigbee">
            
                    
                    Activate the ZigBee Gateway
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="Activator.html">
            
                <a href="Activator.html#activate-the-zigbee-sub-device">
            
                    
                    Activate the ZigBee sub-device
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Device.html">
            
                <a href="Device.html#device-management">
            
                    
                    Device management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="Device.html">
            
                <a href="Device.html#update-device-information">
            
                    
                    Update device information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="Device.html">
            
                <a href="Device.html#device-control">
            
                    
                    Device Control
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="Device.html">
            
                <a href="Device.html#standard-device-control-beta">
            
                    
                    Standard Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="Device.html">
            
                <a href="Device.html#custom-device-control">
            
                    
                    Custom Device Control
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="Device.html">
            
                <a href="Device.html#modify-the-device-name">
            
                    
                    Modify the device name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="Device.html">
            
                <a href="Device.html#remove-device">
            
                    
                    Remove device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="Device.html">
            
                <a href="Device.html#obtain-wifi-signal-strength-of-device">
            
                    
                    Obtain Wifi signal strength of device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="Device.html">
            
                <a href="Device.html#obtain-the-sub-device-list-of-a-gateway">
            
                    
                    Obtain the sub-device list of a gateway
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="Device.html">
            
                <a href="Device.html#firmware-upgrade">
            
                    
                    Firmware upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Share.html">
            
                <a href="Share.html#shared-devices">
            
                    
                    Share devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="Share.html">
            
                <a href="Share.html#add-device-share">
            
                    
                    Add device share
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="Share.html">
            
                <a href="Share.html#getting-shared-relationships">
            
                    
                    Getting Shared Relationships
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="Share.html">
            
                <a href="Share.html#remove-sharing">
            
                    
                    Remove Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="Share.html">
            
                <a href="Share.html#modify-note-name">
            
                    
                    Modify Note Name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Timer.html">
            
                <a href="Timer.html">
            
                    
                    Timer task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Group.html">
            
                <a href="Group.html">
            
                    
                    Group management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    Smart scene
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="SmartScene.html">
            
                <a href="SmartScene.html#smart-scene">
            
                    
                    Smart scene
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="SmartScene.html">
            
                <a href="SmartScene.html#scene-operation">
            
                    
                    Scene operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="DataChannel.html">
            
                <a href="DataChannel.html">
            
                    
                    Data channel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="BLE.html">
            
                <a href="BLE.html#single-ble">
            
                    
                    Single BLE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="BLE.html">
            
                <a href="BLE.html#bluetooth-status-monitor">
            
                    
                    Bluetooth Status Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-scan">
            
                    
                    Bluetooth Scan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="BLE.html">
            
                <a href="BLE.html#active-device">
            
                    
                    Active device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-ota-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="BLE.html">
            
                <a href="BLE.html#device-dp-publish">
            
                    
                    Device DP publish
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Mesh.html">
            
                <a href="Mesh.html#bluetooth-meshtuya-sdk-guide">
            
                    
                    Bluetooth Mesh(TUYA)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="Mesh.html">
            
                <a href="Mesh.html#basic-notion">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="Mesh.html">
            
                <a href="Mesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="Mesh.html">
            
                <a href="Mesh.html#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="Mesh.html">
            
                <a href="Mesh.html#mesh-control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="Mesh.html">
            
                <a href="Mesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#bluetooth-mesh-sdk-guide">
            
                    
                    Bluetooth Mesh(SIG)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#introduction">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#mesh-control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="SIGMesh.html">
            
                <a href="SIGMesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" >
            
                <span>
            
                    
                    Message center
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="Message.html">
            
                <a href="Message.html#obtain-message-list">
            
                    
                    Message list
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="Message.html">
            
                <a href="Message.html#message-push-settings">
            
                    
                    Message push settings
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Feedback.html">
            
                <a href="Feedback.html">
            
                    
                    Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="CommonInterface.html">
            
                <a href="CommonInterface.html">
            
                    
                    Common interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="Push.html">
            
                <a href="Push.html">
            
                    
                    Register pushId
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" >
            
                <a target="_blank" href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_api_reference/index.html">
            
                    
                    API Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="Faq.html">
            
                <a href="Faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="ChangeLog.html">
            
                <a href="ChangeLog.html">
            
                    
                    ChangeLog
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Single BLE</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="guidelines-for-single-ble-sdk"><a name="guidelines-for-single-ble-sdk" class="plugin-anchor" href="#guidelines-for-single-ble-sdk"><i class="fa fa-link" aria-hidden="true"></i></a>Guidelines for Single BLE SDK</h2>
<h3 id="single-ble"><a name="single-ble" class="plugin-anchor" href="#single-ble"><i class="fa fa-link" aria-hidden="true"></i></a>Single BLE</h3>
<p>Single BLE Device is a devcie that able to <strong>one-to-one connect to smart phone by bluetooth</strong>&#x3002;Such as Bluetooth bracelet, Bluetooth headset, Bluetooth speaker, etc. Each device can connect to one smart phone by bluetooth at most at the same time&#xFF0C;At present, <strong>the number of bluetooth connections for each mobile phone terminal is controlled within 6 ~ 7</strong></p>
<h3 id="preparatory-work"><a name="preparatory-work" class="plugin-anchor" href="#preparatory-work"><i class="fa fa-link" aria-hidden="true"></i></a>Preparatory Work</h3>
<p>Tuya iOS Single BLE SDK ( Hereinafter referred to as BLE SDK or Single BLE SDK )&#xFF0C;is developed on the basis of TuyaSmart SDK</p>
<h3 id="function-description"><a name="function-description" class="plugin-anchor" href="#function-description"><i class="fa fa-link" aria-hidden="true"></i></a>Function Description</h3>
<ul>
<li><p>Import header file</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// Objective</span>
<span class="token macro property">#<span class="token directive keyword">import</span> &lt;TuyaSmartBLEKit/TuyaSmartBLEKit.h&gt;</span>

<span class="token comment">// Swift</span>
import TuyaSmartBLEKit
</code></pre>
</li>
<li><p>Main function</p>
<p>The main class of the BLE SDK is  <code>TuyaSmartBLEManager</code>&#xFF0C;This class contains all the features of the BLE SDK&#xFF0C;Includes Bluetooth status monitor, ble device scan, query ble device name, ble device activator, device ota upgrade, etc.</p>
<p>Among them&#xFF0C;<code>TuyaSmartBLEWifiActivator</code>  is the class that support dual-mode device activator</p>
</li>
</ul>
<p>  The following code is the function of <code>TuyaSmartBLEManager</code> &apos;s <code>delegate</code> </p>
<pre class="language-"><code class="lang-objective-c">  <span class="token comment">/**
   Notification of bluetooth state change

   @param isPoweredOn   bluetooth state&#xFF0C;turn on or turn off
  */</span>
  <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>bluetoothDidUpdateState<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isPoweredOn<span class="token punctuation">;</span>

  <span class="token comment">/**
   The inactive device that discovered

   @param deviceInfo   inactive device Model
   */</span>
  <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>didDiscoveryDeviceWithDeviceInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>TYBLEAdvModel <span class="token operator">*</span><span class="token punctuation">)</span>deviceInfo<span class="token punctuation">;</span>
</code></pre>
<h4 id="bluetooth-status-monitor"><a name="bluetooth-status-monitor" class="plugin-anchor" href="#bluetooth-status-monitor"><i class="fa fa-link" aria-hidden="true"></i></a>Bluetooth status monitor</h4>
<p>BLE SDK provides the method of Bluetooth status monitor&#xFF0C;while bluetooth state changing &#xFF08;turn on or turn off&#xFF09;&#xFF0C;you can receive the notification by setting delegate</p>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// Set delegate</span>
<span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">;</span>


<span class="token comment">/**
 Notification of bluetooth state change

 @param isPoweredOn   bluetooth state&#xFF0C;turn on or turn off  
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>bluetoothDidUpdateState<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isPoweredOn <span class="token punctuation">{</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;bluetooth state: %d&quot;</span><span class="token punctuation">,</span> isPoweredOn <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token comment">// Set delegate</span>
<span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span>

<span class="token comment">/**
  Notification of bluetooth state change

 @param isPoweredOn   bluetooth state&#xFF0C;turn on or turn off  
 */</span>
<span class="token keyword">func</span> <span class="token function">bluetoothDidUpdateState</span><span class="token punctuation">(</span><span class="token number">_</span> isPoweredOn<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;bluetooth state: <span class="token interpolation"><span class="token delimiter variable">\(</span>isPoweredOn <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="ble-device-scan"><a name="ble-device-scan" class="plugin-anchor" href="#ble-device-scan"><i class="fa fa-link" aria-hidden="true"></i></a>BLE device scan</h4>
<p>The BLE device to be active will continuously send Bluetooth broadcast packets to the surrounding area, and the client can discover these broadcast packet, BLE SDK will filter the target device by the rule of Tuya BLE device information in the broadcast packet</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">/**
 Start scan

 @param clearCache   wheather clean up the caches of scaned devices 
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>startListening<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>clearCache<span class="token punctuation">;</span>

<span class="token comment">/**
 Stop scan

 @param clearCache   wheather clean up the caches of scaned devices 
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>stopListening<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>clearCache<span class="token punctuation">;</span>
</code></pre>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// Set delegate</span>
<span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
<span class="token comment">// Start scan</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span> startListening<span class="token punctuation">:</span>YES<span class="token punctuation">]</span><span class="token punctuation">;</span>


<span class="token comment">/**
 The inactive device that discovered

 @param deviceInfo     inactive device Model 
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>didDiscoveryDeviceWithDeviceInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>TYBLEAdvModel <span class="token operator">*</span><span class="token punctuation">)</span>deviceInfo <span class="token punctuation">{</span>
    <span class="token comment">// scaned inactive device successfully</span>
    <span class="token comment">// if the device has actived&#xFF0C;it will not in this callback&#xFF0C;BLE SDK will connect and active this device automatically</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token comment">// set delegate</span>
<span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span>
<span class="token comment">// Start scan</span>
<span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startListening</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token comment">/**
 The inactive device that discovered

 @param deviceInfo     inactive device Model 
 */</span>
<span class="token keyword">func</span> <span class="token function">didDiscoveryDevice</span><span class="token punctuation">(</span>withDeviceInfo deviceInfo<span class="token punctuation">:</span> <span class="token builtin">TYBLEAdvModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// scaned inactive device successfully</span>
    <span class="token comment">// if the device has actived&#xFF0C;it will not in this callback&#xFF0C;BLE SDK will connect and active this device automatically</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="active-device"><a name="active-device" class="plugin-anchor" href="#active-device"><i class="fa fa-link" aria-hidden="true"></i></a>Active device</h4>
<p>After scanning an inactive device, the device can be activated and registered to the Tuya cloud</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">/**
 Active device
 The activation process will register device to the tuya cloud

 @param deviceInfo    device Model
 @param homeId               currect home id
 @param success              success Callback
 @param failure             failure Callback
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>activeBLE<span class="token punctuation">:</span><span class="token punctuation">(</span>TYBLEAdvModel <span class="token operator">*</span><span class="token punctuation">)</span>deviceInfo
           homeId<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">)</span>homeId
          success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>TuyaSmartDeviceModel <span class="token operator">*</span>deviceModel<span class="token punctuation">)</span><span class="token punctuation">)</span>success
          failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureHandler<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>The parameter <code>deviceInfo</code>  is from the delegate of scan method</p>
</blockquote>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span> activeBLE<span class="token punctuation">:</span>deviceInfo homeId<span class="token punctuation">:</span>#<span class="token operator">&lt;</span>&#x5F53;&#x524D;&#x5BB6;&#x5EAD;&#x7684; home id<span class="token operator">&gt;</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>TuyaSmartDeviceModel <span class="token operator">*</span>deviceModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// active success</span>

    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token comment">// active fail</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">activeBLE</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>deviceInfo<span class="token punctuation">:</span> deviceInfo<span class="token punctuation">,</span> homeId<span class="token punctuation">:</span> #<span class="token operator">&lt;</span>&#x5F53;&#x524D;&#x5BB6;&#x5EAD;&#x7684; home id<span class="token operator">&gt;</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>deviceModel<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token comment">// active success</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// active fail</span>
        <span class="token punctuation">}</span>
</code></pre>
<h4 id="ble-device-ota-upgrade"><a name="ble-device-ota-upgrade" class="plugin-anchor" href="#ble-device-ota-upgrade"><i class="fa fa-link" aria-hidden="true"></i></a>BLE device OTA upgrade</h4>
<p>For device with firmware upgrade, the device can be upgraded by sending firmware upgrade packets. The firmware upgrade packets information needs to be requested form cloud</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">/**
 Send OTA package, make sure the device is connected before upgrading

 @param uuid        device uuid
 @param pid         device pid
 @param otaData     OTA upgrade data
 @param success     success Callback
 @param failure     failure Callback
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sendOTAPack<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>uuid
                pid<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>pid
            otaData<span class="token punctuation">:</span><span class="token punctuation">(</span>NSData <span class="token operator">*</span><span class="token punctuation">)</span>otaData
            success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessHandler<span class="token punctuation">)</span>success
            failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureHandler<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getFirmwareUpgradeInfo <span class="token punctuation">{</span>
    <span class="token comment">// self.device = [TuyaSmartDevice deviceWithDeviceId:@&quot;your_device_id&quot;];</span>

    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>device getFirmwareUpgradeInfo<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartFirmwareUpgradeModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>upgradeModelList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;getFirmwareUpgradeInfo success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;getFirmwareUpgradeInfo failure: %@&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span> sendOTAPack<span class="token punctuation">:</span>deviceModel<span class="token punctuation">.</span>uuid pid<span class="token punctuation">:</span>deviceModel<span class="token punctuation">.</span>pid otaData<span class="token punctuation">:</span>data success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
       <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;OTA success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
       <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;OTA failure&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">getFirmwareUpgradeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    device<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getFirmwareUpgradeInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">(</span>upgradeModelList<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;getFirmwareUpgradeInfo success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> e <span class="token operator">=</span> error <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;getFirmwareUpgradeInfo failure: <span class="token interpolation"><span class="token delimiter variable">\(</span>e<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendOTAPack</span><span class="token punctuation">(</span>deviceModel<span class="token punctuation">.</span>uuid<span class="token punctuation">,</span> pid<span class="token punctuation">:</span> deviceModel<span class="token punctuation">.</span>pid<span class="token punctuation">,</span> otaData<span class="token punctuation">:</span> data<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;OTA success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;OTA failure&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="query-device-name"><a name="query-device-name" class="plugin-anchor" href="#query-device-name"><i class="fa fa-link" aria-hidden="true"></i></a>Query device name</h4>
<p>After receiving the device broadcast package, the device name can be queried by this method</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">/**
 Query device name

 @param uuid                 device uuid
 @param productKey     proudct key
 @param success         success Callback
 @param failure         failure Callback
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>queryNameWithUUID<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>uuid
               productKey<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>productKey
                  success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>success
                  failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureError<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span> queryNameWithUUID<span class="token punctuation">:</span>bleAdvInfo<span class="token punctuation">.</span>uuid productKey<span class="token punctuation">:</span>bleAdvInfo<span class="token punctuation">.</span>productId success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// query device name success</span>

    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
        <span class="token comment">// query device name failure</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">queryName</span><span class="token punctuation">(</span>withUUID<span class="token punctuation">:</span> bleAdvInfo<span class="token punctuation">.</span>uuid<span class="token punctuation">,</span> productKey<span class="token punctuation">:</span> bleAdvInfo<span class="token punctuation">.</span>productId<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token comment">// query device name success                                                                                      </span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> failure<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token comment">// query device name failure</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="device-dp-publish"><a name="device-dp-publish" class="plugin-anchor" href="#device-dp-publish"><i class="fa fa-link" aria-hidden="true"></i></a>Device DP publish</h4>
<p>Dp publish refer to <a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/resource/Device.html#functions-of-device" target="_blank">Functions of device</a></p>
<h3 id="dual-mode-activator"><a name="dual-mode-activator" class="plugin-anchor" href="#dual-mode-activator"><i class="fa fa-link" aria-hidden="true"></i></a>Dual-mode Activator</h3>
<h4 id="ble-device-scan"><a name="ble-device-scan" class="plugin-anchor" href="#ble-device-scan"><i class="fa fa-link" aria-hidden="true"></i></a>BLE device scan</h4>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// Set delegate</span>
<span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">;</span>

<span class="token comment">// Start scan</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBLEManager sharedInstance<span class="token punctuation">]</span> startListening<span class="token punctuation">:</span>YES<span class="token punctuation">]</span><span class="token punctuation">;</span>


<span class="token comment">/**
 The inactive device that discovered

 @param deviceInfo  inactive device Model
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>didDiscoveryDeviceWithDeviceInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>TYBLEAdvModel <span class="token operator">*</span><span class="token punctuation">)</span>deviceInfo <span class="token punctuation">{</span>
      <span class="token comment">// scaned inactive device</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token comment">// Set delegate</span>
<span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span>

<span class="token comment">// Start scan</span>
<span class="token builtin">TuyaSmartBLEManager</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startListening</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token comment">/**
 The inactive device that discovered

 @param deviceInfo  inactive device Model
 */</span>
<span class="token keyword">func</span> <span class="token function">didDiscoveryDevice</span><span class="token punctuation">(</span>withDeviceInfo deviceInfo<span class="token punctuation">:</span> <span class="token builtin">TYBLEAdvModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// scaned inactive device</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="active-device"><a name="active-device" class="plugin-anchor" href="#active-device"><i class="fa fa-link" aria-hidden="true"></i></a>Active device</h4>
<p>After scanning an inactive device, the device can be activated and registered to the Tuya cloud</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">/**
 *  connect ble wifi device
 *
 *  @param UUID        device uuid
 *  @param homeId      currect home Id
 *  @param productId   product Id
 *  @param ssid        router hotspot name
 *  @param password    router hotspot password
 *  @param timeout     scan timeout
 *  @param success     success Callback
 *  @param failure     failure Callback
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>startConfigBLEWifiDeviceWithUUID<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>UUID
                                  homeId<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">)</span>homeId
                               productId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>productId
                                    ssid<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>ssid
                                password<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>password
                                timeout<span class="token punctuation">:</span><span class="token punctuation">(</span>NSTimeInterval<span class="token punctuation">)</span>timeout
                                 success<span class="token punctuation">:</span><span class="token punctuation">(</span>TYSuccessHandler<span class="token punctuation">)</span>success
                                 failure<span class="token punctuation">:</span><span class="token punctuation">(</span>TYFailureHandler<span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c">  <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBLEWifiActivator sharedInstance<span class="token punctuation">]</span> startConfigBLEWifiDeviceWithUUID<span class="token punctuation">:</span>TYBLEAdvModel<span class="token punctuation">.</span>uuid homeId<span class="token punctuation">:</span>homeId productId<span class="token punctuation">:</span>TYBLEAdvModel<span class="token punctuation">.</span>productId ssid<span class="token punctuation">:</span>ssid password<span class="token punctuation">:</span>password  timeout<span class="token punctuation">:</span><span class="token number">100</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
     <span class="token comment">// active success</span>
        <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
     <span class="token comment">// active fail</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift">  <span class="token builtin">TuyaSmartBLEWifiActivator</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token function">startConfigBLEWifiDevice</span><span class="token punctuation">(</span>withUUID<span class="token punctuation">:</span> <span class="token builtin">TYBLEAdvModel</span><span class="token punctuation">.</span>uuid<span class="token punctuation">,</span> homeId<span class="token punctuation">:</span> homeId<span class="token punctuation">,</span> productId<span class="token punctuation">:</span><span class="token builtin">TYBLEAdvModel</span><span class="token punctuation">.</span>productId<span class="token punctuation">,</span> ssid<span class="token punctuation">:</span> ssid<span class="token punctuation">,</span> password<span class="token punctuation">:</span> password<span class="token punctuation">,</span> timeout<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     <span class="token comment">// active success</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// active fail</span>
        <span class="token punctuation">}</span>
</code></pre>
<h4 id="callback-of-device-activator"><a name="callback-of-device-activator" class="plugin-anchor" href="#callback-of-device-activator"><i class="fa fa-link" aria-hidden="true"></i></a>Callback of device activator</h4>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>bleWifiActivator<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartBLEWifiActivator <span class="token operator">*</span><span class="token punctuation">)</span>activator didReceiveBLEWifiConfigDevice<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartDeviceModel <span class="token operator">*</span><span class="token punctuation">)</span>deviceModel error<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span>error <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error <span class="token operator">&amp;&amp;</span> deviceModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// activator success</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// activator fail</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">bleWifiActivator</span><span class="token punctuation">(</span><span class="token number">_</span> activator<span class="token punctuation">:</span> <span class="token builtin">TuyaSmartBLEWifiActivator</span><span class="token punctuation">,</span> didReceiveBLEWifiConfigDevice deviceModel<span class="token punctuation">:</span> <span class="token builtin">TuyaSmartDeviceModel</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token builtin">Error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error <span class="token operator">&amp;&amp;</span> deviceModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// activator success</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// activator fail</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="stop-discover-device"><a name="stop-discover-device" class="plugin-anchor" href="#stop-discover-device"><i class="fa fa-link" aria-hidden="true"></i></a>Stop discover device</h4>
<p><strong>Code Example</strong></p>
<p>Objc:</p>
<pre class="language-"><code class="lang-objective-c"><span class="token comment">// use after activator finished</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartBLEWifiActivator sharedInstance<span class="token punctuation">]</span> stopDiscover<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Swift:</p>
<pre class="language-"><code class="lang-swift"><span class="token comment">// use after activator finished</span>
<span class="token builtin">TuyaSmartBLEWifiActivator</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span>stopDiscover
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="DataChannel.html" class="navigation navigation-prev " aria-label="Previous page: Data channel">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="BLE.html#bluetooth-status-monitor" class="navigation navigation-next " aria-label="Next page: Bluetooth Status Monitor">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Single BLE","level":"1.15","depth":1,"next":{"title":"Bluetooth Status Monitor","level":"1.15.1","depth":2,"anchor":"#bluetooth-status-monitor","path":"resource/BLE.md","ref":"./resource/BLE.md#bluetooth-status-monitor","articles":[]},"previous":{"title":"Data channel","level":"1.14","depth":1,"path":"resource/DataChannel.md","ref":"./resource/DataChannel.md","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight","anchors"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"oc":"objectivec","objc":"objectivec","objective-c":"objectivec"},"ignore":["sequence"]},"js-sequence-diagram-full":{},"anchors":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/BLE.md","mtime":"2020-02-10T09:09:37.195Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-02-10T09:10:22.112Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

